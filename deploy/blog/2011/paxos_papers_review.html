<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<title>
			
			Paper review: Paxos, Paxos, and Chubby : umbrant
			
		</title>

		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<link rel="icon" type="image/ico" href="/favicon.ico"/>

		
		<link rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/UmbrantBlog" title="umbrant"/>
		

		
		<link href="/media/css/style.css" rel="stylesheet" type="text/css" media="screen" />
		<link href="/media/css/pygments.css" rel="stylesheet" type="text/css" media="screen" />
		<link href='http://fonts.googleapis.com/css?family=Quattrocento|Droid+Sans|Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
		
		
		

		
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
		<script type="text/javascript" src="/media/js/umbrant.js"></script>
		
		<script type="text/javascript">

  			var _gaq = _gaq || [];
  			_gaq.push(['_setAccount', 'UA-4601421-1']);
  			_gaq.push(['_trackPageview']);

  			(function() {
    		 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    		 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    		 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  			 })();

		 </script>
		 
		 
	 </head>

	 <body>
		 <div id="wrapper">
			<div id="page">
				<div id="page-bgtop">
					<div id="page-bgbtm">
						<div id="content">

							

	


	

		<div class="post single">
			<h2 class="title"><a href="">Paper review: Paxos, Paxos, and Chubby</a></h2>
			
			<p class="meta"><span class="date">September 22, 2011</span></p>
			
			<div class="entry">
			

			<!-- Hyde::Article::Begin -->

<!-- Hyde::Excerpt::Begin -->

<p>I'm combining my paper reviews this time, since they are pretty closely&nbsp;coupled:</p>
<ul>
<li><span class="dquo">"</span>Paxos Made Simple", Lamport,&nbsp;2001</li>
<li><span class="dquo">"</span>Paxos Made Practical", Mazieres,&nbsp;2007</li>
<li><span class="dquo">"</span>The Chubby Lock Service for Loosely-coupled Distributed Systems", Burrows,&nbsp;2006</li>
</ul>
<!-- Hyde::Excerpt::End -->

<h2>Paxos Made&nbsp;Simple</h2>
<p>Paxos is a distributed consensus algorithm. At it's essence, it's a quorum-based fault-tolerant way of arriving at a single consistent value among a group of machines. This can be used to do leader election (consensus on who's the master), or synchronous strong consistency (replicating writes in a distributed database). In the case of Chubby, it's used for both: determining who holds a lock (leader election), and serving strongly consistent small&nbsp;files.</p>
<p>Paxos has two basic types of&nbsp;actors:</p>
<ul>
<li><em>Proposers</em> are nodes that are trying to get a value accepted as the "true" value during a round of consensus. Normally, which node is the proposer is pretty stable, and only changes on&nbsp;failure.</li>
<li><em>Acceptors</em> receive proposals from proposers, and vote as part of the quorum. They act as replicas for the global state of the&nbsp;system.</li>
</ul>
<p>Paxos also has two rounds of communication. Here I'm showing the basic version. There are four types of messages here: propose, promise, accept, and&nbsp;accepted.</p>
<ol>
<li>Propose<ul>
<li>The proposer sends a <em>proposal</em> to all the acceptors in the system, and waits for a reply. This proposal is tagged with a round number <strong>N</strong>, which has to increase each time this proposer makes a new proposal. A common thing to do is make this number out of the IP address and some local counter, so they are globally&nbsp;unique.</li>
<li>The acceptors <em>promise</em> to accept the proposal if the proposal's <strong>N</strong> is the highest <strong>N</strong> they've seen from any proposer. A promise indicates that the acceptor will ignore any proposal with a lower number. This is so there's a total ordering on proposals; we don't care which proposer wins, we just want one to&nbsp;win. </li>
</ul>
</li>
<li>Accept<ul>
<li>If the proposer hears back from a quorum of acceptors, it sends out <em>accept</em> requests to the quorum with the value it wants to&nbsp;set.</li>
<li>If the acceptor hasn't promised to a higher proposal number in the meantime, it tells the proposer it <em>accepted</em>.</li>
</ul>
</li>
</ol>
<p>If the proposer gets back a quorum of accepted messages, then it commits. At this point, it can further replicate the value to other nodes, or respond to the client that the operation worked. It's normal for all nodes in the system to in fact fulfill the roles of both proposer and acceptor as&nbsp;needed.</p>
<p>There is one detail that prevents future proposers from changing the value when issuing a higher number proposal. In the first round, the acceptor promise also sends the number and value of the highest number proposal they've accepted. Then, the proposer uses the value of the highest number proposal it gets back when it commits in the accept&nbsp;round.</p>
<h2>Paxos Made&nbsp;Practical</h2>
<h2>Chubby Lock&nbsp;Service</h2>
<p>This is an engineering industry paper from Google, always interesting reads. The basic idea of Chubby is running Paxos on a small <em>cell</em> of five machines to solve consensus problems. One of the five machines in the cell acts as the master, and runs Paxos to decide writes. Reads are all served from the master. It's accessed essential as a Unix-like filesystem which has the property of atomic whole-file writes. This means it's great for storing things small bits of metadata that need to be kept very consistent, or used as a better version of DNS (no worrying about stale entries and&nbsp;TTLs). </p>
<!-- Hyde::Article::End -->

			
			</div>
		</div>


	
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'umbrant'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    var disqus_identifier = '/blog/2011/paxos_papers_review.html';
    var disqus_url = 'http://www.umbrant.com/blog/2011/paxos_papers_review.html';
    //var disqus_developer = 1;

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




						</div>
						<!-- end #content -->

						<div id="sidebar">
	<div id="logo">
		<h1><a href="/">umbrant</a></h1>
	</div>
	<div>
		<p>My name is Andrew Wang. I'm a CS PhD student at UC Berkeley working in distributed systems.</p>
	</div>
	<div id="menu">
		<ul>
			<li><a href="/">Home</a></li>
			<li><a href="/about.html">About</a></li>
			<li><a href="/research.html">Research</a></li>
			<li><a href="/contact.html">Contact</a></li>
		</ul>
	</div>
	<ul>
		<li>
		<h2>Recent Posts</h2>
		<ul>
			
				
			
				

					
					
						
					
						
					
						
						<li><a href="/blog/2011/datacenter_needs_an_operating_system_review.html">Paper review: The Datacenter Needs an Operating System</a></li>
						
					
						
						<li><a href="/blog/2011/performance_modeling_and_analysis_of_flash_review.html">Paper review: Performance Modeling and Analysis of Flash-based Storage Devices</a></li>
						
					
						
						<li><a href="/blog/2011/data-level_parallelism_review.html">Paper review: Data-Level Parallelism in Vector, SIMD, and GPU Architectures</a></li>
						
					
						
						<li><a href="/blog/2011/amdahls_law_review.html">Paper review: Amdahl&#39;s Law in the Multicore Era</a></li>
						
					
				
			
				
			
				
			
				
			
		</ul>
		</li>
		<li>
		<h2>Archive</h2>
		<ul>
			
			
			
			
				
				
				
				
				
				
				<li><a href="/blog/2011/2011.html">2011</a></li>
				
				
				
				
			
			
			
			
			
			
			
			
		</ul>
		</li>
	</ul>
</div>

						<!-- end #sidebar -->

									<div id="footer">
				<p>Copyright &copy; Andrew Wang, umbrant.com</p>
				<p>Licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">CC BY-NC-SA 3.0</a></p>
				<br/>
				<p><a href="http://feeds.feedburner.com/UmbrantBlog"><img src="/media/images/feed-icon-14x14.png" alt="feed"/>&#160; Subscribe to my feed</a></p>
			</div>

						<!-- end #footer -->

					</div>
				</div>
			</div>
			<!-- end #page -->
		</div>
	 </body>
 </html>

 